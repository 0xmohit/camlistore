<!doctype html>
<html>
<head>
	<title>Camlistored UI</title>
	<script src="closure/goog/base.js"></script>
	<script src="./deps.js"></script>
	<script src="?camli.mode=config&var=CAMLISTORE_CONFIG"></script>
	<!-- Begin non-Closure cheating; but depended on by server_connection.js -->
	<script type="text/javascript" src="../base64.js"></script>
	<script type="text/javascript" src="../Crypto.js"></script>
	<script type="text/javascript" src="../SHA1.js"></script>
	<!-- End non-Closure cheating -->
	<script>
		goog.require('camlistore.DebugPage');
	</script>

</head>
<body>
	<form>
		<h2>Root Discovery</h2>
		<p><input type="button" id="discobtn" value="Do Discovery" /></p>
		<div id="discores" style="border: 2px solid gray">(discovery results)</div>

		<h2>Signing Discovery</h2>
		<p><input type="button" id="sigdiscobtn" value="Do jsonSign discovery" /></p>
		<div id="sigdiscores" style="border: 2px solid gray">(jsonsign discovery results)</div>

		<h2>Signing Debug</h2>
		<table>
		<tr align='left'>
			<th>JSON blob to sign: <input type='button' id='addkeyref' value="Add keyref"/></th>
			<th></th>
			<th>Signed blob:</th>
			<th></th>
			<th>Verification details:</th>
		</tr>
		<tr>
			<td><textarea id='clearjson' rows=10 cols=40>{"camliVersion": 1, "camliType": "whatever", "foo": "bar"}</textarea></td>
			<td valign='middle'><input type='button' id='sign' value="Sign &gt;&gt;" /></td>
			<td><textarea id="signedjson" rows=10 cols=40></textarea></td>
			<td valign='middle'><input type='button' id='verify' value="Verify &gt;&gt;" /></td>
			<td><div id='verifyinfo'></div></td>
		</tr>
		</table>
	</form>

	<script>
		var page = new camlistore.DebugPage(CAMLISTORE_CONFIG);
		page.decorate(document.body);
	</script>
</body>
</html>
